# হাতে কম্পিউটারে কম্পিউটার ভিশন শিখি 



একটা প্রবাদ প্রচলিত আছে,

> **“ আছে গরু না বয় হাল , তার দুঃখ চিরকাল “**

আমি  আন্তরিক ভাবে দুঃখিত, হুদাই বক বক করে যাচ্ছি কিন্তু কোন কোড দেখাচ্ছি না ।  কীভাবে কোড লিখে ইমেজ ফাইল লোড করা যায়, সেটা অন্য নামে আরেক ইমেজ হিসেবে  সেভ ও করা যায় ! তবে চলুন এবার মোজা নোংরা করে ফেলি :P

## রিড রাইটঃ

ইমেজ  কে ধরে বেঁধে কম্পিউটারের মেমোরিতে আনা, আবার বের করে দেয়া। একটা  উইন্ডোতে দেখাতে হয় এবং কীভাবে সেটা সেভ করতে হয় । মানে রিড রাইট আরকি!  একাধিক উপায়ে কাজগুলো করা যায় । চলুন দেখা যাক !

**ভালো হয় যদি আপনি আপনার IDE বা এডিটরে কোড লিখে প্র্যাকটিস করেন। শুধু দেখে গেলে কোন কাজে আসবে না ।**

## ইনপুট ইমেজ কই ?

প্রথমে  ডেস্কটপে এই OpencvTut নামের একটা ফোল্ডার খুলুন । এই ফোল্ডারের রুট  ডিরেক্টরিতে images নামের ফোল্ডারে কিছু ইমেজ রাখুন যেগুলো নিয়ে কাজ করবো  আমরা । আপনি চাইলে আপনার পছন্দের ছবি নিয়ে কাজ করতে পারেন।

![img](https://miro.medium.com/max/450/0*SdfY9TZJeK9MgSZb.jpg)



# ধাপে ধাপে প্রোগ্রাম লিখিঃ

**১। মডিউল ইম্পোর্ট করা**

সবার  প্রথম কাজ । আমার কিছু পাইথন মডিউল দরকার হবে , ওপেন্সিভি তো লাগবেই সাথে  আরো কিছু মডিউল লাগবে । সেগুলো অ্যানাকন্ডার সাথে বিল্ট ইন হিসেবে আসে ।  এগুলো হচ্ছে numpy এবং maplotlib

```python
import cv2import numpy as np
from matplotlib import` `pyplot as pt # আস্ত মডিউলের সব ইম্পোর্ট করা বাজে প্র্যাকটিস।
```

**২। ইমেজ রিড করা**

> ইমেজ রিড করার জন্য আমরা cv2 এর *imread()* মেথড টা নিয়ে কাজ করবো । *imread()* ২ টা আর্গুমেন্ট নেয় । একটা হচ্ছে ইমেজ ফাইলের নাম। আরেকটা হচ্ছে রিড মোড ফ্ল্যাগ।

রিড মোড ফ্ল্যাগ গুলো হচ্ছেঃ

> cv2.IMREAD_UNCHAGED => ছবি যেমন কালারে আছে তেমন ই লোড করা ।
>
> cv2.IMREAD_GRAYSCALE => গ্রে স্কেল মোডে লোড করা
>
> cv2.IMREAD_COLOR => রঙ্গিন হিসেবে লোড করা ।

**বিঃদ্রঃ**  এই অধ্যায়টা সহজ সরল রাখার সার্থে আমরা রঙিন ছবি লোড করছি না । কেন করছি  না সেটা পরের অধ্যায়ে রঙিন এবং গ্রে স্কেল ইমেজের পার্থক্য নিয়ে কথা বলার  সময় জানাবো । এখন আসেন ইমেজ লোড করি!

```python
image = cv2.imread('../images/messi.jpg', cv2.IMREAD_GRAYSCALE)
```

উপরের ধাপগুলোকে একসাথে করে পাই ,

```python
import numpy as np
import cv2
# Load an color image in grayscale
img = cv2.imread('../images/messi.jpg',0)
print(img)
```

ধরুন এই কোডটুকু কে সেভ করলাম imageread.py নামে । এবং রান করে দেখতে চাই কি আউটপুট আসে ?

# ইমেজ কি আসলেই ম্যাট্রিক্স ?

কমান্ড লাইনে গিয়ে প্রথমে

> cd Desktop/OpencvTut

তারপর ,

> python imageread.py লিখে ইন্টার চাপুন এবং যাদু দেখুন :D :D

**আউটপুটঃ**
```python
[[141 150 134 ..., 118 132 111]

[134 146 134 ..., 117 133 116]

[137 149 145 ..., 112 128 113]

...,

[ 67 55 82 ..., 134 92 99]

[ 59 63 73 ..., 146 110 102]

[ 58 61 71 ..., 149 116 109]]
```

**অতিকায় ম্যাট্রিক্স!**

তো  যা বলেছিলাম আরকি । ইমেজ একটা ম্যাট্রিক্স। কিন্তু ম্যাট্রিক্স হিসেবে লোড  করে কি হচ্ছে? আমি তো দেখতে পাচ্ছি না ছবিটা ঠিক ঠাক এসেছে কিনা ! আসুন  এবার দেখি ইমেজ এর কি অবস্থা!

**ইমেজ দেখানোর পদ্ধতি :**

- cv2 এর গ্রাফিকাল উইন্ডো দিয়ে ইমেজ লোড করা যায় ।
- এর  একটা অসুবিধা হচ্ছে যে, এইটা অনেক বেশি প্ল্যাটফর্ম ডিপেন্ডেন্ট (মানে  অপারেটিং সিস্টেম ডিপেন্ডেন্ট) এবং বড় সাইজের ইমেজ লোড করতে ঝামেলা হয় ।
- এছাড়া আরেকটা ঝামেলা হচ্ছে জিনিসটা একসাথে একটা বেশি ইমেজ দেখাতে পারে না ।
- কোড লিখে সেভ করার ব্যবস্থা না রাখলে এবং উইন্ডো কুইট করার জন্য কোড না লিখলে প্রোগ্রাম হ্যাং করে (কি ঝামেলা!)

তাও ন্যাটিভ মেথড হিসেবে দেখাচ্ছি।

```python
cv2.imshow('image',img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

লক্ষ্য করুন,
```python
k =cv2.waitKey(0) # ০ দিলে সে সারাজীবন উইন্ডোজ ঝুলিয়ে রাখবে । অন্য ভ্যালু দিলে ঐ সময় পরে নিজেই বন্ধ হয়ে যাবে`

if k == 27 or k == ord('q'): # মানে ESC অথবা q দিলে উইন্ডো চলে যাবে
```

## ইমেজ সেভ করবো ক্যামনে ?

সেভ করার জন্য আপনাকে cv2.destroyAllWindows() এর আগে লিখতে হবে –
```python
cv2.imwrite(fileName, image)
```
অর্থাৎ ফাইলনেম আর ম্যাট্রিক্স টা সাপ্লাই দিলেই হচ্ছে ।
```python
cv2.imwrite('../images/out.jpg', image) # আলাদাই দিলাম!`
```
সবকিছু একসাথে করলে ?

```python
import numpy as np
import cv2
img = cv2.imread('../images/messi.jpg',0)
cv2.imshow('image',img)
k = cv2.waitKey(0)
if k == 27:         # wait for ESC key to exit
    cv2.destroyAllWindows()
elif k == ord('s'): # wait for 's' key to save and exit
    cv2.imwrite('../images/out.jpg',img)
    cv2.destroyAllWindows()
```

আজ পর্যন্তই , আবার দেখা হবে … মোজা নোংরাও হবে :P
